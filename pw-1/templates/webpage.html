<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <title>Login page</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="../static/webpage.css">
    </head>
    <body>
        <div class="container mt-3">
            <form action="#" target="_self" method="post">
                <div class="row">
                    <div class="col-md-3">
                        <label for="username"></label>
                        <input type="text" class="form-control" id="username" name="username" placeholder="USER NAME" autocomplete="off">
                    </div>
                    <div class="col-md-3">
                        <label for="email"></label>
                        <input type="email" class="form-control" id="email" name="email" placeholder="E-mail" autocomplete="off">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                        <label for="phno"></label>
                        <input type="text" class="form-control" id="phno" name="phno" autocomplete="off" placeholder="PHONE NUMBER">
                    </div>
                    <div class="col-md-3">
                        <label for="addr"></label>
                        <input type="text" class="form-control" id="addr" name="addr" autocomplete="off" placeholder="ADDRESS">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <br>
                        <button type="submit">SAVE</button>
                    </div>
                    <div class="col-md-3 d-flex align-items-center" style="margin-top: 17px;">
                        {% with messages=get_flashed_messages(with_categories=True) %}
                            {% if messages %}
                                <div id="flash-messages">
                                    {% for category, message in messages %}
                                        {{message}}
                                    {% endfor %}
                                </div>
                            {% endif %}
                        {% endwith %}
                            
                        <script>
                        setTimeout(function() {
                            var flashMessages = document.getElementById('flash-messages');
                            if (flashMessages) {
                                flashMessages.style.transition = 'opacity 0.5s ease-out';
                                flashMessages.style.opacity = '0';
                                setTimeout(function() {
                                    flashMessages.style.display = 'none';
                                }, 500); 
                            }
                        }, 3000);
                        </script>
                    </div>
                </div>
            </form>
            <br>
            <div class="accordion-container">
                <div class="accordion" id="useraccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button type="button" class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#usersTable" aria-expanded="false" aria-controls="usersTable">
                                List of Users
                            </button>
                        </h2>
                    </div>
                    <div class="accordion-collapse collapse" id="usersTable" data-bs-parent="#useraccordion">  
                        <div class="accordion-body">    
                            <table class="table table-bordered table-hover table-sm">    
                                <thead> 
                                    <tr>    
                                        <th class="alignment">Username</th>   
                                        <th class="alignment" style="width: 30%;">E-mail</th> 
                                        <th class="alignment">Phone Number</th>   
                                        <th class="alignment" style="width: 30%;">Address</th>
                                        <th class="alignment">Actions</th>
                                    </tr>   
                                </thead>    
                                <tbody> 
                                    {% for i in users %}    
                                    <tr>    
                                        <td>{{i[0]}}</td>   
                                        <td>{{i[1]}}</td>   
                                        <td>{{i[2]}}</td>   
                                        <td>{{i[3]}}</td> 
                                        <td>
                                            <button type="button" data-bs-toggle="modal" data-bs-target="#editModal" data-username="{{ i[0] }}" data-email="{{ i[1] }}" data-phone="{{ i[2] }}" data-address="{{ i[3] }}">Edit</button>
                                            <button type="button">Delete</button>
                                        </td>
                                    </tr>   
                                    {% endfor %}    
                                </tbody>
                            </table>    
                        </div>  
                    </div>  
                </div>
            </div>
        </div>
       <script src="../static/sfwp.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    </body>
</html>